<!DOCTYPE html>
<html id="webApp" lang="zh-CN">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="csrf-param" content="_csrf-frontend">
		<title>注册-源泰金控-专业期货服务平台</title>
		<link rel="stylesheet" href="css/style.css">
		<link href="css/login/bootstrap.css" rel="stylesheet">
		<link href="css/login/common.css" rel="stylesheet">
		<link href="font/iconfont.css" rel="stylesheet">
		<script src="src/script/app.js"></script>
	</head>

	<body>

		<div id="g_web" class="g_web ">

			<style>
				* {
					margin: 0;
					padding: 0;
				}
				
				li {
					list-style: none
				}
				
				a {
					text-decoration: none
				}
				
				body {
					text-align: left;
				}
				
				img {
					border: none;
				}
				/*注册页面1*/
				
				.title9 {
					padding: 36px 0px 24px;
					text-align: center;
					border-bottom: 2px solid #f0f0f0;
					margin: 0 20px;
				}
				
				.log-text {
					text-align: center;
					margin: 12px 0;
				}
				
				.log-text a {
					color: #0aa1f0;
				}
				
				.registerindex {
					background: #F8F8F8;
					width: 100%;
					height: 710px;
					padding: 50px 0;
				}
				
				.register {
					width: 980px;
					margin: 0 auto;
					background: #fff;
					height: 100%;
				}
				
				.registrationprocess {
					height: 14%;
					position: relative;
				}
				
				.registercourse {
					position: absolute;
					top: 42px;
					width: 100%;
				}
				
				.registercourse li {
					text-align: center;
					color: rgba(97, 100, 105, 0.77);
					font-size: 19px;
					width: 33%;
					display: inline-block;
				}
				
				.registercourse .on {
					color: #fff;
				}
				
				.registrationprocess img {
					width: 100%;
					border-top: 1px solid #eee;
					border-bottom: 1px solid #eee;
					margin-top: 20px;
					padding: 4px 0;
				}
				
				.RegisterClass {
					height: 85%;
					width: 100%
				}
				
				.RegisterClassleft,
				.RegisterClassleft2 {
					width: 480px;
					margin: 25px 50px;
				}
				
				.verifyimg {
					height: 100%;
					width: 80%;
					float: right;
				}
				
				.verifyimg input {
					float: left;
					width: 60%;
				}
				
				.verifyimg img {
					float: right;
					width: 36%;
					height: 46px;
				}
				
				.reg-name,
				.pass,
				.referrer,
				.verify,
				.input-group,
				.name,
				.idCard,
				.TradeName,
				.charter {
					height: 68px;
					line-height: 47px;
					width: 100%
				}
				
				.input-group .col-md-8,
				.input-group .col-md-3 {
					float: left;
					padding: 0;
				}
				
				.input-group .col-md-8 {
					width: 56%;
				}
				
				.input-group .col-md-3 {
					margin-left: 4%;
					width: 40%;
					text-align: center
				}
				
				.input-group .col-md-3 button {
					border: 1px solid transparent;
					height: 47px;
					border-radius: 0;
					background: rgba(0, 128, 0, 0.71);
					width: 100%;
					color: #fff;
				}
				
				.form-control {
					border-radius: 6px;
					font-weight: 500;
					height: 45px;
					width: 80%;
					float: right;
					text-indent: 20px;
					border: 1px solid #ccc;
					display: block;
					font-size: 14px;
				}
				
				.error-tip {
					color: red;
					font-weight: bold;
					display: block;
					height: 20px;
					text-align: left;
				}
				
				.checkbox {
					text-align: left;
					font-size: 12px;
					margin-left: 20%;
				}
				
				.RegisterClassright {
					float: right;
					width: 50%;
					margin: 5% 0;
					height: 333px;
					padding-right: 7%;
				}
				
				.btn-reg {
					width: 80%;
					margin: 20px 0 0 20%;
					border: none;
					font-size: 16px;
					font-weight: bold;
				}
				
				.RegisterClassright .login {
					font-size: 14px;
					color: #CAC5BB;
					text-align: right
				}
				
				.carousel {
					width: 100%;
					position: relative;
					margin: 0 auto;
					height: 100%;
				}
				
				#indexFocus .ui-ifPrevBtn {
					background: url(./images/temp/arrow-left-dark.png) no-repeat;
					_filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src='./images/temp/arrLeftFocus.png');
					_background: none;
					float: left;
				}
				
				#indexFocus .ui-ifNextBtn {
					background: url(./images/temp/arrow-right-dark.png) no-repeat;
					_filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src='./images/temp/arrRigFocus.png');
					_background: none;
					float: right;
				}
				
				#indexFocus,
				#indexFocus .ui-ifPrevWrap .ui-prevImg,
				#indexFocus .ui-ifNextWrap .ui-nextImg {
					display: none;
					cursor: pointer;
					height: 100%;
				}
				
				#indexFocus .ui-ifPrevWrap,
				#indexFocus .ui-ifNextWrap {
					position: absolute;
					z-index: 99;
					bottom: 80px;
					height: 56px;
					overflow: hidden;
				}
				
				#indexFocus .ui-ifPrevBtn,
				#indexFocus .ui-ifNextBtn {
					display: inline-block;
					width: 34px;
					height: 56px;
					text-indent: -1000px;
					overflow: hidden;
				}
				
				#indexFocus .indexFocusCon {
					width: 70%;
					height: 333px;
					overflow: hidden;
					position: relative;
					z-index: 0;
					margin: 0 auto;
				}
				
				#indexFocus ul.indexFocusList li {
					height: 333px;
					position: relative;
					z-index: 0;
				}
				
				#indexFocus .indexFocusList .A {
					width: 248px
				}
				
				#indexFocus .indexFocusList .B {
					width: 248px
				}
				
				.indexFocusList li h3 {
					margin: 12px 0;
					color: black;
					font-size: 20px
				}
				
				.indexFocusList li p {
					margin-bottom: 3px;
					font-size: 13px;
					color: #716F6F;
				}
				
				#indexFocus ul.indexFocusList li #indexFocus p {
					position: absolute;
					bottom: 30px;
					color: #fff;
					width: 100%;
					height: 40px;
					line-height: 40px;
					font-size: 18px;
					text-indent: 20px;
				}
				
				#indexFocus .indexFocusNum {
					position: absolute;
					z-index: 99;
					right: 43%;
					bottom: 10px;
					bottom: 7%;
				}
				
				#indexFocus .indexFocusNum a {
					float: left;
					display: inline-block;
					width: 10px;
					height: 10px;
					background: #eee;
					text-indent: -100px;
					overflow: hidden;
					margin: 0 5px;
					border-radius: 50%
				}
				
				.carousel img {
					width: 150px;
					height: 150px;
					margin-top: 8px;
				}
				
				#indexFocus .ui-ifPrevWrap,
				.litImgList .ui-ifPrevWrap {
					left: 0;
					top: 105px;
				}
				
				#indexFocus .ui-ifNextWrap,
				.litImgList .ui-ifNextWrap {
					right: 0;
					top: 105px;
				}
				
				.indexFocusList a {
					height: 333px;
					text-align: center;
					display: block;
				}
				
				#indexFocus ul.indexFocusList,
				.litImgList ul.indexFocusList {
					position: absolute;
					z-index: 0;
					left: 0;
					top: 0;
					height: 100%;
				}
				
				#indexFocus .indexFocusNum .hover,
				.litImgList .indexFocusNum .hover {
					background: #F58F90;
				}
				
				.greatTopic .photoText h4 a,
				.heavyRec .photoText h4 a,
				.depthReports .photoText h4 a,
				.financeObserver .photoText h4 a,
				.carNews .photoText h4 a,
				.tv .photoText h4 a {
					font-size: 14px;
					font-weight: 700;
				}
				/*注册页面2*/
				
				.RegisterClassleft2 {
					margin-top: 3%;
				}
				
				.registertype {
					width: 100%
				}
				
				.btn-success {
					margin-left: 100px
				}
				
				.alert-success {
					background: url('./images/temp/success.png') 8px center no-repeat;
					height: 80px;
				}
				
				.col-md-3 {
					float: right;
				}
				
				.col-md-3 .getcode {
					width: 130px;
					height: 46px;
				}
				
				.registertype .tab {
					width: 215px;
					margin: 25px 0 35px 22%;
				}
				
				.registertype .tab a {
					display: block;
					text-align: center;
					line-height: 38px;
					float: left;
					text-decoration: none;
					color: #333;
					width: 50%;
					font-weight: bold;
				}
				
				.registertype .tab a.on {
					background: #E64E3F;
					color: #fff;
					text-decoration: none;
				}
				
				.registertype .content li {
					display: none;
				}
				
				#name {
					background: url(http://www.panguziguan.com/asset/front/img/9.pngg') 8px center no-repeat;
				}
				
				#idCardNum {
					background: url(http://www.panguziguan.com/asset/front/img/10.pngg') 8px center no-repeat;
				}
				
				#TradeName {
					background: url(http://www.panguziguan.com/asset/front/img/7.pngg') 8px center no-repeat;
				}
				
				#charter {
					background: url(http://www.panguziguan.com/asset/front/img/8.pngg') 8px center no-repeat;
				}
				
				.content .form-control {
					text-indent: 25px
				}
			</style>

			<div class="registerindex">
				<div class="register">
					<div class="alert alert-danger" style="display:none">
						<p id="alertText"></p>
					</div>
					<div style="padding-top: 20px;" class="RegisterClass">
						<div class="RegisterClassleft">
							<div class="registertype">
								<div class="tab hidden">
									<a href="javascript:;" class="on" id="taba">个人注册</a>
									<a href="javascript:;">企业注册</a>
								</div>
								<form class="form-horizontal" id="submit_form">
									<div class="content" style="background: #fff">

										<ul>
											<li style="display:block;">
												<div class="reg-name" style="font-size: 14px;">
													手机号码：<input v-model="uname" value="" maxlength="12" type="text" class="form-control required chinaMobile" placeholder="请输入手机号码">
												</div>
											</li>

										</ul>
									</div>
									<input id="tabstyle" type="hidden" value="1">
									<div class="pass">
										登录密码：<input v-model="pwd" maxlength="32" type="password" class="form-control required" placeholder="请输入密码">
									</div>
									<div class="pass">
										确认密码：<input v-model="mkPwd" maxlength="32" type="password" class="form-control required" placeholder="请输入确认密码">

									</div>
									
						<input type="hidden" name="referralCode" v-model="referralCode" value=""/>
						<!--
					   <div class="referrer">
						   邀请人：<input type="text" class="form-control" id="refferee" name="refferee" placeholder="请输入邀请人手机号(非必填项)" />
					   </div>
					   -->
									<div class=" verify">
										验证码：
										<div class=" verifyimg"><input v-model="captcha.value" maxlength="5" type="text" placeholder="验证码" class="form-control">
											<a href="javascript:" @click="getCaptcha"><img :src="captcha.url"></a>
											<!--								<img id="captchaImg" onclick="refreshCaptcha()" title="看不清楚？点击刷新" src="/captcha.do?cid=USER_REG" class="text-style2 pull-left ml">-->
										</div>
									</div>

									<div class=" verify">
										短信验证码：
										<div class=" verifyimg"><input v-model="smsCode.value" maxlength="6" type="text" placeholder="验证码" class="form-control">
											<div style="float: right;">
												<style>
													.buttons { display: inline-block; width: 140px; height: 44px; line-height: 44px; text-align: center; color: #fff; background: #2e8ded; border-radius: 6px;}
												</style>
												<a href="javascript:" class="buttons" v-show="smsCode.getShow" @click="_smsCode" v-text="smsCode.getText"></a><span class="buttons" v-show="smsCode.cdShow"><b v-text="smsCode.cdTime"></b>s</span>
											</div>
											<!--								<img id="captchaImg" onclick="refreshCaptcha()" title="看不清楚？点击刷新" src="/captcha.do?cid=USER_REG" class="text-style2 pull-left ml">-->
										</div>
									</div>

									<div class="checkbox">
										<label> <input v-model="agreement" id="license" type="checkbox">我已阅读并同意
								<a href="agreement.pdf" target="_blank" >
									<span style="color: #E1A038;    line-height: 20px;">《源泰金控用户注册协议》</span>
								</a>
							</label>
									</div>
									<button id="submit" @click="register" v-text="regTxt" type="button" class="btn btn-reg btn-warning"></button>
								</form>
							</div>
						</div>

					</div>
				</div>
			</div>

		</div>

		<script>
			ui.loader('register', function() {
				var vm = new Vue({
					el: '#webApp',
					data: $.extend(vue.data, {
						error: {
							show: false,
							msg: ''
						},
						uname: '',
						pwd: '',
						mkPwd: '',
						//						referralCode: '',
						agreement: false,
						regTxt: '注册',
						autoCheckLogin: false
					}),
					methods: $.extend(vue.methods, {
						_error: function(msg) {
							this.error = {
								show: true,
								msg: msg
							};
							layer.alert(msg);
						},
						_smsCode: function() {
							var uname = $.trim(this.uname);
							var captcha = $.trim(this.captcha.value);
							if(uname == '')
								this._error('请输入手机号');
							else if(!app.regExp.phone.test(uname))
								this._error('请输入正确的手机号');
							else if(captcha == '')
								this._error('请输入验证码');
							else {
								var url = this.interfaceUrl + app.config.sendSms.url + '?phone=' + uname + '&captcha=' + captcha + '&type=0';
								this.getSmsCode(url, function(data) {
									if(data == -1)
										vm._error('手机号已注册过，请直接登录');
									else if(data == 0)
										vm._error('验证码不正确');
								});
							}
						},
						userAgreement: function() {
							layer.open({
								type: 2,
								title: false,
								closeBtn: 0,
								// shade: [0],
								area: ['60%', '60%'],
								content: [app.config.siteUrl + '/agreement.html'],
								btn: ['已阅读并同意', '取消'],
								btnAlign: 'c',
								yes: function(index) {
									vm.agreement = true;
									layer.close(index)
								}
							});
						},
						register: function() {
							var uname = $.trim(this.uname);
							var pwd = this.pwd;
							var mkPwd = this.mkPwd;
							var referralCode = $.trim(this.referralCode);
							var captcha = $.trim(this.captcha.value);
							var smsCode = $.trim(this.smsCode.value);
							var agreement = this.agreement;
							if(uname == '')
								this._error('请输入需要注册的手机号');
							else if(!app.regExp.phone.test(uname))
								this._error('请输入正确的手机号');
							else if(pwd == '')
								this._error('请输入密码');
							else if(mkPwd == '')
								this._error('请输入确认密码');
							else if(mkPwd != pwd)
								this._error('两次密码不一致，请重新输入');
							else if(captcha == '')
								this._error('请输入验证码');
							else if(smsCode == '')
								this._error('请输入短信验证码');
//							else if(referralCode == '')
//								this._error('请输入邀请码');
							else if(!agreement)
								this._error('请仔细阅读并同意《胜捷通注册协议》');
							else if(this.regTxt != '注册中...') {
								this.ajaxSubmit({
									before: function() {
										vm.regTxt = '注册中...';
									},
									url: vm.interfaceUrl + '/interface/register',
									data: "username=" + uname + "&password=" + pwd + "&captcha=" + captcha + "&phoneCode=" + smsCode + "&referralUserId=" + referralCode,
									success: function(data) {
										if(data.code == 0) {
											layer.open({
												title: '提示',
												content: '注册成功',
												end: function() {
													vm.loginJump();
												}
											});
										} else
											vm._error(data.msg);
									},
									error: function() {},
									complete: function() {
										vm.regTxt = '注册';
									}
								});
							}
						}
					}),
					ready: function() {
						this.referralCode = app.methods.getUrlArg('referralCode');
						//						this.userAgreement();
						this.getCaptcha();
						$('label').click(function() {
							vm.error = {
								show: false,
								msg: ''
							}
						});
						$('.input').on('input propertychange', function() {
							vm.error = {
								show: false,
								msg: ''
							}
						});
					}
				});
			});
		</script>

	</body>

</html>